<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.heeexy.example.dao.WxMyPostDao">

    <!--后台每个用户自己的帖子记录-->
    <select id="getMyPostList" parameterType="com.alibaba.fastjson.JSONObject" resultType="com.alibaba.fastjson.JSONObject">

        select mypost_id myPostId,onuser_id onUserId,post_id postId,mypost_state myPostState,DATE_FORMAT(create_time, '%Y.%m.%d %T')  createTime
        from fly_mypost
    </select>
<!--后台计数-->
    <select id="countMyPost" parameterType="com.alibaba.fastjson.JSONObject" resultType="java.lang.Integer">
        select count(0) from fly_mypost;
    </select>
    <!--修改自己帖子隐藏状态-->
    <update id="updateMyPostById" parameterType="com.alibaba.fastjson.JSONObject">
        update  fly_mypost set mypost_state =#{myPostState} where mypost_id = #{myPostId}
    </update>
    <!--前台用户自己的帖子记录-->
    <select id="getMyPostListById" parameterType="com.alibaba.fastjson.JSONObject" resultType="com.alibaba.fastjson.JSONObject">

        select mypost_id myPostId,onuser_id onUserId,post_id postId,DATE_FORMAT(create_time, '%Y.%m.%d %T')  createTime
        from fly_mypost where onuser_id =#{onUserId} and mypost_state = 0;
    </select>
    <!--计算本人发帖数量-->
    <select id="countMyPostByUserId" parameterType="com.alibaba.fastjson.JSONObject">
        select count(0) from fly_mypost where onuser_id =#{onUserId}
    </select>
    <!--批量删除帖子-->
    <update id="updateByPostId" parameterType="com.alibaba.fastjson.JSONObject">


    </update>
</mapper>